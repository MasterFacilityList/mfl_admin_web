<section class="section row">
    <div ui-view="header"></div>
    <div class="content fade-content">
        <contentheader hide-back-button></contentheader>
        <div class="col-xs-12 margin-t-20">
            <div class="col-md-6 col-sm-12 pad-0" ng-if="user.user_constituencies.length!==0 || user.all_permissions.facilities.add_facilityapproval || user.user_counties.length!==0">
                <div class="col-xs-12 margin-b-5 content-card" style="border-bottom: 1px solid #e0e0e0;" ng-if="user.user_constituencies.length!==0">
                    <div class="col-xs-2 col-sm-1  hidden-xs text-left margin-t-5 pad-l-0">
                        <i class="fa fa-building fa-2x icon-circles pad-icon-two"></i>
                    </div>
                    <div class="col-xs-10 col-sm-11 text-left margin-t--5 pad-r-0 pad-l-4">
                        <h4 class="fw-600 ">
                            <span class="">
                                Total Facilities
                                <br/>
                                <span class="fs-13" ng-if="user.constituency_name">
                                    {{user.constituency_name | titlecase}} Sub-county
                                </span>
                                <span class="fs-13" ng-if="user.ward_name">
                                    {{user.ward_name | titlecase}} Sard
                                </span>
                            </span>
                            <span class="pull-right margin-t--15 text-blue fs-30">
                                {{summary.total_facilities }}
                            </span>
                        </h4>
                    </div>
                </div>
                <!-- Facilities with updates pending approval -->
                <a ui-sref="facilities_approve" style="cursor: pointer" requires-permission="facilities.view_facility,facilities.add_facilityapproval">
                <div class="col-xs-10 margin-b-5 content-card ">
                    <div class="col-xs-12 text-left margin-t--5 pad-r-0 pad-l-0" tooltip="Click to view facilities with pending updates">
                        <h4 class="fw-600 ">
                            <span class="fs-26 text-black" style="font-family : 'Lato Light', sans-serif;">
                                #{{summary.pending_updates}} Facilities Pending Approval
                                <br/>
                                <span class="fs-16">
                                    Pending approval <span ng-if="user.county_name">in {{user.county_name | titlecase}} County</span>
                                </span>
                            </span>
                            <span class="fs-18 pull-right text-warning margin-t--27" style="font-family : 'Lato Light', sans-serif;">
                                <i class="fa fa-dot-circle-o fa-3x"></i>
                            </span>
                        </h4>
                    </div>
                </div>
                </a>
                <div class="col-xs-12 content-card margin-b-5" style="border-bottom: 1px solid #e0e0e0;" ng-if="user.user_constituencies.length!==0">
                    <h4 class="fw-600 fs-16 margin-t-5 col-sm-5 pad-l-0">
                        Recently Added Facilities:
                    </h4>
                    <span class="text-right col-sm-7 pad-r-0">
                        <button class="btn btn-xs btn-rounded btn-warning fs-12" ng-click="weekly()">Last Week</button>
                        <button class="btn btn-xs btn-rounded btn-warning fs-12" ng-click="monthly()">Last Month</button>
                        <button class="btn btn-xs btn-rounded btn-warning fs-12" ng-click="quarterly()">Last Quarter</button>
                    </span>
                    <div class="col-xs-12 pad-l-0" style="background-color: #f1f1f4;">
                        <p class="margin-l-3 margin-t-5">
                            <span ng-if="!recent_spinner" class="fs-16 pad-0">   <i>{{ summary.recently_created }}</i> Recently Added Facilities
                            </span>
                            <span ng-if="recent_spinner" class="fs-18 pad-l-20">
                                <i class="fa fa-circle-o-notch fa-spin">
                                </i>
                            </span>
                        </p>
                    </div>
                </div>
            </div><!--/col-->
            <div class="col-md-5 col-xs-12 pad-0" ng-if="user.groups.length!==0" ng-class="{'col-md-offset-1' : user.user_constituencies.length!==0 || user.user_counties.length!==0 || user.all_permissions.facilities.add_facilityapproval}">
                <div class="col-xs-12 content-card margin-b-5" style="border-bottom: 1px solid #e0e0e0;" ng-if="user.groups.length!==0">
                    <div class="col-md-1 col-sm-1 margin-r-10 pad-l-0 hidden-xs text-center">
                        <i class="fa fa-users fa-2x icon-circles margin-t-10"></i>
                    </div>
                    <div class="col-xs-9 pad-r-0 text-left pad-l-4" ng-if="user.groups.length!==0">
                        <h4 class="fw-600 margin-b-0">Active Groups</h4>
                        <p ng-repeat="g in user.groups" class="fs-14">
                            {{g.name}}
                        </p>
                    </div>
                </div>
                <div class="col-xs-12 content-card margin-b-5" ng-if="user.user_counties.length!==0">
                    <div class="col-md-1 col-sm-1 margin-r-10 pad-l-0  hidden-xs text-center">
                        <i class="fa fa-map-marker fa-2x icon-circles pad-icon margin-t-10"></i>
                    </div>
                    <div class="col-xs-9 pad-l-4 pad-r-0 text-left">
                        <h4 class="fw-600 margin-b-0">Active Counties</h4>
                        <p ng-repeat="c in user.user_counties" class="fs-12">
                            {{c.county_name | titlecase}} County
                        </p>
                    </div>
                </div>
                <div class="col-xs-12 content-card margin-b-5" ng-if="user.user_constituencies.length!==0">
                    <div class="col-md-1 col-sm-1 margin-r-10 pad-l-0  hidden-xs text-center">
                        <i class="fa fa-map-marker fa-2x icon-circles pad-icon margin-t-10"></i>
                    </div>
                    <div class="col-xs-9 pad-r-0 text-left pad-l-0">
                        <h4 class="fw-600 margin-b-0">Active Sub-Counties</h4>
                        <p ng-repeat="c in user.user_constituencies" class="fs-12 margin-b-5">
                            {{c.constituency_name | titlecase}} Sub-county
                        </p>
                    </div>
                </div>
            </div><!--/col-->
        </div>
        <div class="col-xs-12" style="background-color: #f4f4f6;"  ng-hide="(summary.county_summary.length==0) && (summary.constituencies_summary.length==0) && (summary.wards_summary.length==0)">
                <div class="col-xs-12 content-card">
                    <div class="">
                        <h3 class="text-center dash" ng-if="!spinner">
                           Number of health facilities by
                            <span ng-if="ward">Ward</span>
                            <span ng-if="constituency">Sub-County</span>
                            <span ng-if="county">County</span>
                            <span ng-if="user.constituency_name">
                                in {{user.constituency_name | titlecase}} Sub-county
                            </span>
                            <span ng-if="user.county_name">
                                in {{user.county_name | titlecase}} County
                            </span>
                        </h3>
                    </div>
                    <div ng-if="spinner" class="col-xs-12 text-center margin-t-20 margin-b-20 fs-18">
                        <i class="fa fa-circle-o-notch fa-spin fa-2x"></i>
                    </div>
                    <div class="panel-body">
                        <div id="facilitybar">
                        </div>
                    </div>
                </div>
        </div>
        <div class="col-xs-12 pad-0">
            <div class="col-md-5">
                <div class="col-xs-12 content-card">
                    <h3 class="text-center dash">Facility Owner Categories</h3>
                    <div ng-if="spinner" class="col-xs-12 text-center margin-t-20 margin-b-20 fs-18">
                        <i class="fa fa-circle-o-notch fa-spin fa-2x"></i>
                    </div>
                    <div class="panel-body">
                        <div id="chartowners">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-7">
                <div class="col-xs-12 content-card">
                    <h3 class="text-center dash">Facility Types</h4>
                    <div ng-if="spinner" class="col-xs-12 text-center margin-t-20 margin-b-20 fs-18">
                        <i class="fa fa-circle-o-notch fa-spin fa-2x"></i>
                    </div>
                    <div class="panel-body">
                        <div id="chartfacility">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
