<div class="content-header">
   <div class="action-container content-header-extra">
       <div class="action-container content-header-extra pad-r-5">
            <button tooltip-placement="bottom"  class="btn btn-primary" ng-click="exportToExcel()">
                Export To Excel
            </button>
       </div>
   </div>
   <h2 class="content-title">
        <span class="main-title"> Facility Report by County with Constituencies</span>
   </h2>
</div>
<section class="margin-t-10">
    <div class="col-sm-12">
        <div class="col-xs-12 margin-t-40" ng-if="spinner">
        <div class="map-change-state">
              <div class="loader"></div>
              <div class="row">
                  <h3 class="text-center loader-text">Please wait...</h3>
              </div>
          </div>
        </div>
        <div ng-if="!spinner" class="content-card col-xs-12">
            <div class="col-sm-4">
                <ui-select ng-model="$parent.search">
                    <ui-select-match placeholder="Select County">{{$select.selected.county}}</ui-select-match>
                    <ui-select-choices repeat="county.county as county in county_constituencies_facilities | filter:$select.search">{{county.county | titlecase}}</ui-select-choices>
                </ui-select>
            </div>
            <div ng-show="search!==''" class="col-sm-1 col-xs-12"><button class="btn btn-default" ng-click="search=''">Clear</button></div>
            <div class="col-xs-12 margin-b-20">
                <table class="table table-condensed fs-14 margin-t-20">
                    <tbody class="fade-content" ng-repeat="county in county_constituencies_facilities | filter:search">
                        <tr>
                            <td data-title="County:"><strong class="fs-16">{{::county.county | titlecase}}</strong></td>
                        </tr>
                        <tr>
                            <td>
                              <table class="table table-condensed">
                               <thead>
                                   <th class="col-xs-9">Constituency</th>
                                   <th class="col-xs-3 text-center">Number of Facilities</th>
                               </thead>
                                <tbody>
                                   <tr ng-repeat="c in county.facilities">
                                        <td class="col-xs-9" data-title="Constituency:">{{::c.constituency | titlecase}}</td>
                                        <td class="col-xs-3 text-center" data-title="Facilities:">{{::c.number_of_facilities}}</td>
                                    </tr>
                                </tbody>
                              </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>
