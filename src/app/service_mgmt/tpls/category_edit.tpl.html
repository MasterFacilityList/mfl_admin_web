<div class="content-header">
   <div class="action-container content-header-extra">
        <a tooltip="delete category" tooltip-placement="bottom" class="{{edit_view ? '' : 'hidden'}} btn btn-danger"
          ui-sref="service_mgmt.category_list.category_edit.delete" ui-sref-opts="{reload:true}" requires-user-feature="is_staff"
          requires-permission="facilities.delete_servicecategory">
          Delete
        </a>
   </div>
   <h2 class="content-title">
       <span class="main-title"><i class="fa {{edit_view ? 'fa-edit' : 'fa-plus-circle'}}"></i> {{edit_view ? 'Edit' : 'New'}} Category</span>
   </h2>
</div>
<div ui-view="delete"></div>
    <div class="col-md-12">
      <div class="fade-content col-sm-10 col-sm-offset-1 margin-t-20 content-card">
        <form name="category_frm" novalidate>
          <div class="col-sm-10 col-sm-offset-1 margin-t-20 margin-b-20">
            <div class="form-group">
                <label class="control-label">Name</label>
                <input class="form-control" name="name" ng-model="category.name" required placeholder="Name" api-checker/>
            </div>
            <div class="form-group">
                <label class="control-label">Abbreviation</label>
                <input class="form-control" name="abbreviation" ng-model="category.abbreviation" api-checker/>
            </div>
            <div class="form-group">
                <label class="control-label">KEPH Level</label>
                <select class="form-control" name="keph_level" ng-model="category.keph_level" required api-checker>
                    <option value="" disabled>Select a keph level</option>
                    <option  ng-repeat="keph in kephs" ng-selected="{{keph.id == category.keph_level}}" value="{{keph.id}}">{{keph.name}}</option>
                </select>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Description</label>
                <textarea class="form-control" name="description" ng-model="category.description" api-checker placeholder="Description"></textarea>
            </div>
            <div class="pull-left">
                <button class="btn btn-primary" ng-click="save(category_frm)" requires-permission="facilities.change_servicecategory" requires-user-feature="is_staff">Save</button>
                <a class="margin-l-10 btn btn-default margin-l-5" ui-sref="service_mgmt.category_list">Cancel</a>
                <mfl-revision-view id="category_id" wrapper="wrapper" ></mfl-revision-view>
            </div>
           </div>
        </form>
      </div>
    </div>
    <div class="col-xs-10 col-xs-offset-1">
      <button ng-show="edit_view" class="btn btn-primary" ng-click="viewServices = !viewServices">
          {{viewServices ? 'Hide' : 'View'}} Services <i class="fa {{viewServices ? 'fa-chevron-up' : 'fa-chevron-down'}}"></i>
      </button>
    </div>
    <div class="col-sm-10 col-sm-offset-1 fade-content margin-t-20" content-slide-in="viewServices" slide-show-duration="1000">
        <sil-grid template="service_mgmt/tpls/category_services.tpl.html" grid-for="service_mgmt" api-key="services"
            data="services" filters="filters" error="alert">
        </sil-grid>
    </div>
